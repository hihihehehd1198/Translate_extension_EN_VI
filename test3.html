<!DOCTYPE html>
<html lang="en-US">
  <style>
    #goog-gt- {
      display: none !important;
    }
  </style>
  <body>
    <div style="display: none" id="google_translate_element"></div>
    <span style="position: absolute; margin-top: -50px" id="window-name"></span>
    <script
      type="text/javascript"
      src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"
    ></script>

    <script type="text/javascript">
      function googleTranslateElementInit() {
        setCookie("googtrans", "/vi", 1);

        new google.translate.TranslateElement(
          { pageLanguage: "en", includedLanguages: "vi" },
          "google_translate_element"
        );
      }
      function setCookie(key, value, expiry) {
        var expires = new Date();
        expires.setTime(expires.getTime() + expiry * 24 * 60 * 60 * 1000);
        document.cookie =
          key + "=" + value + ";expires=" + expires.toUTCString();
      }
      function disableTableBackground() {
        const el = document.getElementsByTagName("iframe")?.[0];
        if (el) el.style.opacity = 0;
      }
      let i = 0;
      let interval = setInterval(() => {
        i++;
        console.log(
          window.name,
          document.getElementById("window-name").textContent
        );
        if (i === 100) {
          document.getElementById("window-name").textContent =
            window?.name || "";
          googleTranslateElementInit();
          clearInterval(interval);
        }
      }, 10);
      let j = 0;

      const interval2 = setInterval(() => {
        j++;
        disableTableBackground();
        j === 500 && clearInterval(interval2);
      }, 1);

      document.addEventListener("keydown", (ev) => {
        console.log(ev.code);
        if (event.key.toString().toLowerCase().includes("esc")) {
          window.close();
        }
      });
    </script>
  </body>
</html>
